(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2099276c","chunk-482474ea","chunk-2d2183cf","chunk-2d0c8d5b"],{"03b2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[e._v("库存变更 "),r("span",{staticClass:"back",on:{click:function(t){return e.back(!1)}}},[r("i",{staticClass:"iconfont icon-fanhui"}),e._v(" 返回 ")])]),r("div",{staticClass:"wrap"},[r("el-row",[r("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{size:"medium",value:e.storageData.title,disabled:""}})],1),r("el-form-item",{attrs:{label:"商品总库存",prop:"stock"}},[r("el-input",{attrs:{size:"medium",value:e.storageData.stock,disabled:""}})],1),r("el-form-item",{attrs:{label:"剩余库存",prop:"stock"}},[r("el-input",{attrs:{size:"medium",value:e.storageData.rest_stock,disabled:""}})],1),r("el-form-item",{attrs:{label:"出入库",prop:"status"}},[r("el-select",{attrs:{size:"medium",filterable:"",placeholder:"请选择出入库"},on:{change:e.statusChange},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusData,function(t){return r("el-option",{attrs:{value:t.type,label:t.value}},[r("span",{staticStyle:{color:"#b4b4b4","margin-right":"15px","font-size":"12px"}},[e._v(e._s(t.type))]),r("span",[e._v(e._s(t.value))])])}),1)],1),r("el-form-item",{attrs:{label:"渠道",prop:"type"}},[r("el-select",{attrs:{size:"medium",filterable:"",placeholder:"请选择渠道"},on:{change:e.channelChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.channelData,function(t){return r("el-option",{attrs:{value:t.type,label:t.value}},[r("span",{staticStyle:{color:"#b4b4b4","margin-right":"15px","font-size":"12px"}},[e._v(e._s(t.type))]),r("span",[e._v(e._s(t.value))])])}),1)],1),r("el-form-item",{attrs:{label:"库存数量",prop:"count"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写库存数量"},model:{value:e.form.count,callback:function(t){e.$set(e.form,"count",e._n(t))},expression:"form.count"}})],1),r("el-form-item",{staticClass:"submit"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)],1)],1)])},n=[],i=r("a34a"),s=r.n(i),o=r("8ffd");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t,r,a,n,i,s){try{var o=e[i](s),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(a,n)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var i=e.apply(t,r);function s(e){l(i,a,n,s,o,"next",e)}function o(e){l(i,a,n,s,o,"throw",e)}s(void 0)})}}var p={name:"add",props:{editID:Number},data:function(){var e=this,t=function(t,r,a){r?Number.isInteger(r)?r<0?a(new Error("值必须大于0")):""===e.form.status?(e.$refs.form.validateField("status"),a(new Error("出入库必须填写"))):0==e.form.status&&r>e.storageData["rest_stock"]?a(new Error("该库存数大于总库存数")):a():a(new Error("必须是数字")):a(new Error("库存数量不能为空"))};return{loading:!1,skuData:[],form:{type:"",status:"",count:0},storageData:{},channelData:[{type:1,value:"小程序"},{type:2,value:"淘宝"},{type:3,value:"供应商"}],statusData:[{type:0,value:"出库"},{type:1,value:"入库"}],rules:{count:[{validator:t,trigger:"blur"}],status:[{required:!0,message:"出入库状态必须选择",trigger:"blur"}],type:[{required:!0,message:"渠道必须选择",trigger:"blur"}]}}},created:function(){this.getStorage()},methods:{getStorage:function(){var e=u(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,o["default"].getStorage(this.editID);case 4:t=e.sent,t["online"]=!!t["online"],this.storageData=t,console.log(this.storageData),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.back(!1);case 13:this.loading=!1;case 14:case"end":return e.stop()}},e,this,[[1,10]])}));function t(){return e.apply(this,arguments)}return t}(),channelChange:function(e){this.form.type=e},statusChange:function(e){this.form.status=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var r=u(s.a.mark(function r(a){var n,i,l;return s.a.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=25;break}return t.loading=!0,r.prev=2,t.form["storage_id"]=t.editID,r.next=6,o["default"].createRecord(t.form);case 6:n=r.sent,0===n.error_code&&(t.$message.success("".concat(n.msg)),t.resetForm(e),t.back()),r.next=22;break;case 10:if(r.prev=10,r.t0=r["catch"](2),i=r.t0.data.msg,!i||"object"!==c(i)){r.next=22;break}r.t1=s.a.keys(i);case 15:if((r.t2=r.t1()).done){r.next=22;break}return l=r.t2.value,t.$message.error(i[l]),r.next=20,setTimeout(function(){},1e3);case 20:r.next=15;break;case 22:t.loading=!1,r.next=27;break;case 25:return t.$message.error("请填写正确的信息"),r.abrupt("return",!1);case 27:case"end":return r.stop()}},r,null,[[2,10]])}));return function(e){return r.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},back:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$emit("close",e)}}},f=p,d=(r("630c"),r("cba8")),m=Object(d["a"])(f,a,n,!1,null,"54225fa8",null);t["default"]=m.exports},"2f44":function(e,t,r){"use strict";r("3853")},3853:function(e,t,r){},"4ec9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[e._v("新建库存商品 "),r("span",{staticClass:"back",on:{click:function(t){return e.back(!1)}}},[r("i",{staticClass:"iconfont icon-fanhui"}),e._v(" 返回 ")])]),r("div",{staticClass:"wrap"},[r("el-row",[r("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"属性值",prop:"prop_value"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写sku属性值"},model:{value:e.form.prop_value,callback:function(t){e.$set(e.form,"prop_value",t)},expression:"form.prop_value"}})],1),r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-input-number",{attrs:{precision:2,step:.1,min:0,label:"价格"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"出厂价格",prop:"original_price"}},[r("el-input-number",{attrs:{precision:2,step:.1,min:0,label:"出厂价格"},model:{value:e.form.original_price,callback:function(t){e.$set(e.form,"original_price",t)},expression:"form.original_price"}})],1),r("el-form-item",{attrs:{label:"SKU",prop:"sku_id"}},[r("el-select",{attrs:{size:"medium",filterable:"",placeholder:"请选择所属SKU"},on:{change:e.skuChange},model:{value:e.form.sku_id,callback:function(t){e.$set(e.form,"sku_id",t)},expression:"form.sku_id"}},e._l(e.skuData,function(t){return r("el-option",{attrs:{value:t.id,label:t.title}},[r("span",{staticStyle:{color:"#b4b4b4","margin-right":"15px","font-size":"12px"}},[e._v(e._s(t.id))]),r("span",[e._v(e._s(t.title))])])}),1)],1),r("el-form-item",{attrs:{label:"是否上架",prop:"online"}},[r("el-switch",{attrs:{"active-color":"#3963bc"},model:{value:e.form.online,callback:function(t){e.$set(e.form,"online",t)},expression:"form.online"}})],1),r("el-form-item",{staticClass:"submit"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)],1)],1)])},n=[],i=r("a34a"),s=r.n(i),o=r("5725"),c=r("8ffd");function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t,r,a,n,i,s){try{var o=e[i](s),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(a,n)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var i=e.apply(t,r);function s(e){u(i,a,n,s,o,"next",e)}function o(e){u(i,a,n,s,o,"throw",e)}s(void 0)})}}var f={name:"add",props:{editID:Number},data:function(){return{loading:!1,skuData:[],form:{title:"",prop_value:"",online:!0,price:0,original_price:0},rules:{}}},created:function(){this.getStorage(),this.getSkus()},methods:{getStorage:function(){var e=p(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,c["default"].getStorage(this.editID);case 4:t=e.sent,t["online"]=!!t["online"],this.form=t,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.back(!1);case 12:this.loading=!1;case 13:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),getSkus:function(){var e=p(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["default"].getSkus(0,100);case 2:t=e.sent,this.skuData=t.collection;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),skuChange:function(){var e=p(s.a.mark(function e(t){var r,a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.skuData.filter(function(e){return e.id===t}),r&&!(r.length<=0)){e.next=3;break}return e.abrupt("return");case 3:a=this.form,a.title=r[0]["title"],a.online=1==r[0]["online"],a.price=r[0]["price"],a.img=r[0]["img"],a.code=r[0]["code"],this.form=a;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(){var r=p(s.a.mark(function r(a){var n,i,o;return s.a.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=24;break}return t.loading=!0,r.prev=2,r.next=5,c["default"].addStorage(t.form);case 5:n=r.sent,0===n.error_code&&(t.$message.success("".concat(n.msg)),t.resetForm(e),t.back()),r.next=21;break;case 9:if(r.prev=9,r.t0=r["catch"](2),i=r.t0.data.msg,!i||"object"!==l(i)){r.next=21;break}r.t1=s.a.keys(i);case 14:if((r.t2=r.t1()).done){r.next=21;break}return o=r.t2.value,t.$message.error(i[o]),r.next=19,setTimeout(function(){},1e3);case 19:r.next=14;break;case 21:t.loading=!1,r.next=26;break;case 24:return t.$message.error("请填写正确的信息"),r.abrupt("return",!1);case 26:case"end":return r.stop()}},r,null,[[2,9]])}));return function(e){return r.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},back:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$emit("close",e)}}},d=f,m=(r("2f44"),r("cba8")),h=Object(m["a"])(d,a,n,!1,null,"68858ec2",null);t["default"]=h.exports},5725:function(e,t,r){"use strict";r.r(t);var a=r("a34a"),n=r.n(a),i=r("dfd8"),s=r("f121");function o(e,t,r,a,n,i,s){try{var o=e[i](s),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var i=e.apply(t,r);function s(e){o(i,a,n,s,c,"next",e)}function c(e){o(i,a,n,s,c,"throw",e)}s(void 0)})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var f=function(){function e(){l(this,e)}return p(e,[{key:"getSkus",value:function(){var e=c(n.a.mark(function e(){var t,r,a,o=arguments;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:0,r=o.length>1&&void 0!==o[1]?o[1]:s["default"].pageSize,console.log(r),e.next=5,Object(i["get"])("v1/sku",{page:t,count:r,handleError:!0});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSku",value:function(){var e=c(n.a.mark(function e(t){var r;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["get"])("v1/sku/".concat(t),{handleError:!0});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"addSku",value:function(){var e=c(n.a.mark(function e(t){var r;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["post"])("v1/sku",t,{handleError:!0});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"editSku",value:function(){var e=c(n.a.mark(function e(t,r){var a;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("============"),console.log(t),e.next=4,Object(i["put"])("v1/sku/".concat(t),r,{handleError:!0});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"delSku",value:function(){var e=c(n.a.mark(function e(t){var r;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["_delete"])("v1/sku",{ids:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=new f},"630c":function(e,t,r){"use strict";r("c316")},6928:function(e,t,r){},"69c6":function(e,t,r){"use strict";r("d0f1")},"7d16":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["list"===e.redirectType?r("div",{staticClass:"container"},[r("div",{staticClass:"header"},[r("div",{staticClass:"title"},[r("span",[e._v("库存管理")]),r("el-button",{staticClass:"add-banner-item",attrs:{type:"primary",plain:""},on:{click:e.handleAdd}},[e._v("添加库存")])],1)]),r("el-divider"),r("el-row",{staticClass:"stock-list-btn"},[r("el-button",{staticClass:"list-btn-wrap",attrs:{type:1==e.btnType?"primary":""},on:{click:function(t){return e.btnSwitch(1)}}},[e._v("库存列表")]),r("el-button",{staticClass:"list-btn-wrap",attrs:{type:2==e.btnType?"primary":""},on:{click:function(t){return e.btnSwitch(2)}}},[e._v("库存预警")])],1),r("sticky-top",{staticClass:"header-wrap"},[r("div",{staticClass:"order-header"},[r("div",{directives:[{name:"auth",rawName:"v-auth",value:"搜索日志",expression:"'搜索日志'"}],staticClass:"header-right"},[r("lin-search",{ref:"searchCode",staticClass:"search-wrap",attrs:{placeholder:"请输入商品编号"},on:{btn:e.onCodeChange}}),r("lin-search",{ref:"searchTitle",staticClass:"search-wrap",attrs:{placeholder:"请输入商品名称"},on:{btn:e.onTitleChange}}),r("lin-date-picker",{ref:"searchDate",staticClass:"date",on:{dateChange:e.handleDateChange}}),r("el-button",{staticClass:"back-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.backInit}},[e._v("返回浏览")])],1)])]),r("feiy-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{tableColumn:e.tableColumn,tableData:e.tableData,operate:e.operate,pagination:e.pagination,curPage:e.currentPage,operateStyle:e.operateStyle},on:{currentChange:e.currentChange,handleEdit:e.handleEdit,handleDetail:e.handleDetail,handleStorage:e.handleStorage,handleDelete:e.handleDelete,"row-click":e.rowClick},scopedSlots:e._u([{key:"default",fn:function(t){return[t.tag&&"online"==t.prop?r("el-tag",{attrs:{type:"上架"==t.tag?"success":"danger"}},[e._v(e._s(t.tag))]):e._e()]}}],null,!1,601189910)})],1):"add"===e.redirectType?r("sku-add",{on:{close:e.closePage}}):"edit"===e.redirectType?r("sku-edit",{attrs:{editID:e.editID},on:{close:e.closePage}}):"record"===e.redirectType?r("record-list",{attrs:{editID:e.editID},on:{close:e.closePage}}):"recordAdd"===e.redirectType?r("record-add",{attrs:{editID:e.editID},on:{close:e.closePage}}):e._e()],1)},n=[],i=r("a34a"),s=r.n(i),o=r("8eab"),c=r("c9ad"),l=r("8ffd"),u=r("c219"),p=r("4ec9"),f=r("762b"),d=r("03b2"),m=r("f73d");function h(e,t,r,a,n,i,s){try{var o=e[i](s),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(a,n)}function v(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var i=e.apply(t,r);function s(e){h(i,a,n,s,o,"next",e)}function o(e){h(i,a,n,s,o,"throw",e)}s(void 0)})}}var b={name:"SkuList",components:{SkuAdd:u["default"],SkuEdit:p["default"],feiyTable:m["default"],RecordList:f["default"],RecordAdd:d["default"],LinSearch:o["default"],LinDatePicker:c["default"]},data:function(){return{loading:!1,tableColumn:[{prop:"id",label:"id",width:50},{prop:"sku_id",label:"sku_id",width:100},{prop:"code",label:"sku编码",width:150},{prop:"img",label:"图片",type:"image",noRepeat:!0},{prop:"title",label:"标题",width:200},{prop:"price",label:"价格（元）",width:150},{prop:"online",label:"是否上架",width:150,type:"tag",noRepeat:!0},{prop:"stock",label:"总库存",width:100},{prop:"rest_stock",label:"剩余库存",width:100},{prop:"create_time",label:"供货时间"}],tableData:[],operate:[],operateStyle:{width:320},pagination:{pageTotal:0},btnType:1,showEdit:!1,editID:1,redirectType:"list",currentPage:1,searchParams:{},searchDate:[],searchCode:"",searchTitle:""}},created:function(){this.operate=[{name:"编辑",func:"handleEdit",type:"primary"},{name:"查看详情",func:"handleDetail",type:"primary"},{name:"库存变更",func:"handleStorage",type:"primary"},{name:"删除",func:"handleDelete",type:"danger",auth:"删除图书"}],this.getStorages()},methods:{searchParam:function(){var e=this.searchParams;this.searchCode&&(e["code"]=this.searchCode),this.searchTitle&&(e["title"]=this.searchTitle),this.searchDate&&this.searchDate.length>0&&(e["start"]=this.searchDate[0],e["end"]=this.searchDate[1]),this.searchParams=e,this.isSearch=!0},handleDateChange:function(e){this.searchDate=e,this.searchParam(),this.getStorages()},onCodeChange:function(e){this.searchCode=e.trim(),this.searchParam(),this.getStorages()},onTitleChange:function(e){this.searchTitle=e.trim(),this.searchParam(),this.getStorages()},backInit:function(){var e=v(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.searchTitle="",this.searchCode="",this.searchDate=[],this.searchParams={},this.$refs.searchDate.clear(),this.$refs.searchCode.clear(),this.$refs.searchTitle.clear(),this.isSearch=!1,e.next=10,this.getStorages();case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),btnSwitch:function(e){e&&(this.btnType=e,2==e?(this.searchParams["type"]=1,this.getStorages()):(this.searchParams["type"]=0,this.getStorages()))},getStorages:function(){var e=v(s.a.mark(function e(){var t,r,a=arguments;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,this.loading=!0,e.next=4,l["default"].getStorages(t,this.searchParams);case 4:if(r=e.sent,this.loading=!1,!(r.total_nums<=0)){e.next=9;break}return this.tableData=[],e.abrupt("return");case 9:this.pagination.pageTotal||(this.pagination={pageTotal:r.total_nums}),r.collection.forEach(function(e){e["online"]=0===e["online"]?"下架":"上架"}),this.tableData=r.collection;case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),currentChange:function(e){e<=0||(e-=1,this.currentPage=e+1,this.getStorages(e))},handleAdd:function(){this.redirectType="add"},handleDetail:function(e){var t=e.row;this.redirectType="record",this.editID=t.id},handleStorage:function(e){var t=e.row;this.redirectType="recordAdd",this.editID=t.id},handleEdit:function(e){var t=e.row;this.editID=t.id,this.redirectType="edit"},handleDelete:function(e){var t=this;this.$confirm("确认要删除该库存吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(v(s.a.mark(function r(){var a,n;return s.a.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return a=[e.row.id],t.loading=!0,r.next=4,l["default"].delStorage(a);case 4:n=r.sent,t.loading=!1,0===n.error_code&&(t.getStorages(t.currentPage-1),t.$message({type:"success",message:"".concat(n.msg)}));case 7:case"end":return r.stop()}},r)})))},rowClick:function(){},closePage:function(e){this.redirectType="list",e&&this.getStorages(this.currentPage-1)}}},g=b,k=(r("9f9f"),r("cba8")),y=Object(k["a"])(g,a,n,!1,null,"0abf08cd",null);t["default"]=y.exports},"8c6b":function(e,t,r){},"8eab":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lin-search"},[r("el-select",{staticClass:"el-select",attrs:{size:"medium",filterable:"",placeholder:"请选择客户等级"},on:{change:e.selEvent},model:{value:e.curSel,callback:function(t){e.curSel=t},expression:"curSel"}},[e._l(e.selData,function(t,a){return[r("el-option",{key:t,attrs:{value:a,label:t}},[r("span",[e._v(e._s(t))])])]})],2),r("el-input",{staticClass:"input-with-select",attrs:{size:"medium",placeholder:e.placeholder,clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBtn},slot:"append"})],1)],1)},n=[],i=r("306b"),s={props:{placeholder:{type:String,default:"请输入内容"},selData:{type:Array,default:["客户名","责任人"]}},data:function(){return{keyword:"",curSel:0}},created:function(){var e=this;this.$watch("keyword",i["default"].debounce(function(t){e.$emit("query",t)},1e3))},methods:{clear:function(){this.keyword="",this.$emit("close")},selEvent:function(){var e=this.curSel;this.$emit("sel",e)},searchBtn:function(){var e=this.keyword;this.$emit("btn",e)}}},o=s,c=(r("69c6"),r("cba8")),l=Object(c["a"])(o,a,n,!1,null,"d0682418",null);t["default"]=l.exports},"9f9f":function(e,t,r){"use strict";r("6928")},c219:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[e._v("新建库存商品 "),r("span",{staticClass:"back",on:{click:function(t){return e.back(!1)}}},[r("i",{staticClass:"iconfont icon-fanhui"}),e._v(" 返回 ")])]),r("div",{staticClass:"wrap"},[r("el-row",[r("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"属性值",prop:"prop_value"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写sku属性值"},model:{value:e.form.prop_value,callback:function(t){e.$set(e.form,"prop_value",t)},expression:"form.prop_value"}})],1),r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-input-number",{attrs:{precision:2,step:.1,min:0,label:"价格"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"出厂价格",prop:"original_price"}},[r("el-input-number",{attrs:{precision:2,step:.1,min:0,label:"出厂价格"},model:{value:e.form.original_price,callback:function(t){e.$set(e.form,"original_price",t)},expression:"form.original_price"}})],1),r("el-form-item",{attrs:{label:"SKU",prop:"sku_id"}},[r("el-select",{attrs:{size:"medium",filterable:"",placeholder:"请选择所属SKU"},on:{change:e.skuChange},model:{value:e.form.sku_id,callback:function(t){e.$set(e.form,"sku_id",t)},expression:"form.sku_id"}},e._l(e.skuData,function(t){return r("el-option",{attrs:{value:t.id,label:t.title}},[r("span",{staticStyle:{color:"#b4b4b4","margin-right":"15px","font-size":"12px"}},[e._v(e._s(t.id))]),r("span",[e._v(e._s(t.title))])])}),1)],1),r("el-form-item",{attrs:{label:"是否上架",prop:"online"}},[r("el-switch",{attrs:{"active-color":"#3963bc"},model:{value:e.form.online,callback:function(t){e.$set(e.form,"online",t)},expression:"form.online"}})],1),r("el-form-item",{staticClass:"submit"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)],1)],1)])},n=[],i=r("a34a"),s=r.n(i),o=r("5725"),c=r("8ffd");function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t,r,a,n,i,s){try{var o=e[i](s),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(a,n)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var i=e.apply(t,r);function s(e){u(i,a,n,s,o,"next",e)}function o(e){u(i,a,n,s,o,"throw",e)}s(void 0)})}}var f={name:"add",data:function(){return{loading:!1,skuData:[],form:{title:"",prop_value:"",online:!0,price:0,original_price:0},rules:{}}},created:function(){this.getSkus()},methods:{getSkus:function(){var e=p(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["default"].getSkus(0,100);case 2:t=e.sent,this.skuData=t.collection;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),skuChange:function(){var e=p(s.a.mark(function e(t){var r,a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.skuData.filter(function(e){return e.id===t}),r&&!(r.length<=0)){e.next=3;break}return e.abrupt("return");case 3:a=this.form,a.title=r[0]["title"],a.online=1==r[0]["online"],a.price=r[0]["price"],a.img=r[0]["img"],r[0]["spu"]&&(a.code=r[0]["spu"]["code"]),this.form=a;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(){var r=p(s.a.mark(function r(a){var n,i,o;return s.a.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=24;break}return t.loading=!0,r.prev=2,r.next=5,c["default"].addStorage(t.form);case 5:n=r.sent,0===n.error_code&&(t.$message.success("".concat(n.msg)),t.resetForm(e),t.back()),r.next=21;break;case 9:if(r.prev=9,r.t0=r["catch"](2),i=r.t0.data.msg,!i||"object"!==l(i)){r.next=21;break}r.t1=s.a.keys(i);case 14:if((r.t2=r.t1()).done){r.next=21;break}return o=r.t2.value,t.$message.error(i[o]),r.next=19,setTimeout(function(){},1e3);case 19:r.next=14;break;case 21:t.loading=!1,r.next=26;break;case 24:return t.$message.error("请填写正确的信息"),r.abrupt("return",!1);case 26:case"end":return r.stop()}},r,null,[[2,9]])}));return function(e){return r.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},back:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$emit("close",e)}}},d=f,m=(r("dcd0"),r("cba8")),h=Object(m["a"])(d,a,n,!1,null,"2f8e1af8",null);t["default"]=h.exports},c316:function(e,t,r){},c9ad:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",size:"medium","popper-class":"date-box","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},n=[],i={data:function(){return{value:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]}}},watch:{value:function(e){this.$emit("dateChange",e)}},methods:{clear:function(){this.value=""}}},s=i,o=r("cba8"),c=Object(o["a"])(s,a,n,!1,null,null,null);t["default"]=c.exports},d0f1:function(e,t,r){},dcd0:function(e,t,r){"use strict";r("8c6b")}}]);