(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34008b34","chunk-6e21060e","chunk-ae63b0c2","chunk-2d2183cf"],{"0410":function(e,t,a){},"07a6":function(e,t,a){},"0acb":function(e,t,a){"use strict";a("0410")},"4a25":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mg-order"},["list"===e.redirectType?a("div",[a("sticky-top",[a("div",{staticClass:"order-header"},[a("div",{staticClass:"header-left"},[a("p",{staticClass:"title"},[e._v("订单列表")])]),a("div",{directives:[{name:"auth",rawName:"v-auth",value:"搜索日志",expression:"'搜索日志'"}],staticClass:"header-right"},[a("lin-search",{ref:"searchKeyword",attrs:{placeholder:"请输入订单号/姓名"},on:{btn:e.onQueryChange}}),a("lin-date-picker",{ref:"searchDate",staticClass:"date",on:{dateChange:e.handleDateChange}}),a("el-select",{attrs:{size:"medium",filterable:"","default-first-option":"",placeholder:"请选择订单状态",prop:"status"},on:{change:e.statusChange},model:{value:e.curStatus,callback:function(t){e.curStatus=t},expression:"curStatus"}},[a("el-option",{attrs:{label:"全部订单",value:-1}}),e._l(e.refundStatusEnum,function(e,t){return a("el-option",{attrs:{label:e.msg,value:e.number}})})],2),a("el-button",{staticClass:"back-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.backInit}},[e._v("返回浏览")])],1)]),e.keyword?e._e():a("el-divider")],1),a("div",{staticClass:"container"},[a("feiy-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{tableColumn:e.tableColumn,tableData:e.tableData,operate:e.operate,operateStyle:e.operateStyle,pagination:e.pagination,curPage:e.currentPage},on:{currentChange:e.currentChange,handleEdit:e.handleEdit,handleCellSave:e.handleCellSave},scopedSlots:e._u([{key:"default",fn:function(t){return[t.tag&&"status"==t.prop?a("el-tag",{attrs:{type:e.getStatusVal(t.tag)["type"]}},[e._v(e._s(e.getStatusVal(t.tag,1)["statusVal"]))]):e._e(),t.tag&&"reply_status"==t.prop?a("el-tag",{attrs:{type:e.getStatusVal(t.tag)["type"]}},[e._v(e._s(e.getStatusVal(t.tag)["statusVal"]))]):e._e()]}}],null,!1,1162009412)})],1)],1):"edit"===e.redirectType?a("div",[a("refund-edit",{attrs:{orderID:e.editParam.orderID,orderNO:e.editParam.orderNO,skuID:e.editParam.skuID},on:{close:e.closePage}})],1):e._e()])},i=[],r=a("a34a"),l=a.n(r),s=a("c9ad"),o=a("8eab"),c=a("9bae"),u=a("a82d"),d=a("7683"),h=a("f73d");function p(e,t,a,n,i,r,l){try{var s=e[r](l),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(n,i)}function f(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function l(e){p(r,n,i,l,s,"next",e)}function s(e){p(r,n,i,l,s,"throw",e)}l(void 0)})}}var g={name:"OrderList",components:{LinSearch:o["default"],LinDatePicker:s["default"],RefundEdit:u["default"],feiyTable:h["default"]},data:function(){return{searchUser:"",loading:!1,curStatus:-1,refundStatusEnum:d["default"],tableColumn:[{prop:"id",label:"id",width:80},{prop:"user_id",label:"用户id",width:80},{prop:"sku_title",label:"产品名称",width:200},{prop:"price",label:"退款价格",width:150},{prop:"count",label:"数量",width:80},{prop:"order_no",label:"订单号",width:200},{prop:"reply_status",label:"退换货状态",type:"tag",width:150,noRepeat:!0},{prop:"status",label:"进度状态",type:"tag",width:150,noRepeat:!0},{prop:"reason",label:"退款原因",width:200},{prop:"create_time",label:"发布时间",width:200}],tableData:[],operate:[],operateStyle:{width:150},editParam:{orderID:0,skuID:0,orderNO:""},pagination:{pageTotal:0},currentPage:1,redirectType:"list",editID:1,keyword:null,searchKeyword:"",searchDate:[],searchParams:{},isSearch:!1}},created:function(){this.operate=[{name:"查看",func:"handleEdit",type:"primary"}],this.getRefunds()},methods:{getRefunds:function(){var e=f(l.a.mark(function e(){var t,a,n=arguments;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,a=[],e.prev=2,this.loading=!0,e.next=6,c["default"].getRefunds(t,this.searchParams);case 6:a=e.sent,this.loading=!1,this.pagination.pageTotal||(this.pagination={pageTotal:a.total_nums}),a=a.collection,e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](2),a=[],this.isSearch&&this.$message.error("未搜索到匹配的结果"),this.loading=!1;case 17:this.tableData=a;case 18:case"end":return e.stop()}},e,this,[[2,12]])}));function t(){return e.apply(this,arguments)}return t}(),getRefundVal:function(e){var t={statusVal:"正常",type:"success"};return e&&e.length>0&&(t={statusVal:"退款处理",type:"danger"}),t},getStatusVal:function(e,t){var a=Object.values(d["default"]).filter(function(t){return t.number==e});if(a.length<=0)return{statusVal:"",type:""};var n=a[0].msg,i=a[0].type;1!=a[0].number&&2!=a[0].number&&3!=a[0].number||1!=t||(n="申请中",i="danger");var r={statusVal:n,type:i};return r},searchParam:function(){var e={};-1!=this.curStatus&&(e["status"]=this.curStatus),this.searchDate&&this.searchDate.length>0&&(e["start"]=this.searchDate[0],e["end"]=this.searchDate[1]),this.searchKeyword&&(e["order_no"]=this.searchKeyword),this.searchParams=e,this.isSearch=!0},validateIsChinese:function(e){var t=new RegExp("[一-龥]+");return t.test(e)},handleDateChange:function(e){this.searchDate=e,this.searchParam(),this.getRefunds()},statusChange:function(e){this.curStatus=e,this.searchParam(),this.getRefunds()},onQueryChange:function(e){this.searchKeyword=e.trim(),this.searchParam(),this.getRefunds()},backInit:function(){var e=f(l.a.mark(function e(){return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.searchKeyword="",this.searchDate=[],this.searchParams={},this.$refs.searchDate.clear(),this.$refs.searchKeyword.clear(),this.isSearch=!1,e.next=8,this.getRefunds();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),currentChange:function(e){e<=0||(e-=1,this.currentPage=e+1,this.getRefunds(e))},handleEdit:function(e){var t=e.row;this.editID=t.id;var a={orderID:t.order_id,skuID:t.sku_id,orderNO:t.order_no};this.editParam=a,this.redirectType="edit"},handleCellSave:function(){var e=f(l.a.mark(function e(t){var a,n,i,r;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.row,n=t.prop,i=this.singleUpdate({id:a.id,value:a[n],field:n}),this.loading=!0,e.next=5,order.updateSingle(i);case 5:r=e.sent,this.loading=!1,0===r.error_code&&this.$message.success("".concat(r.msg));case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),singleUpdate:function(e){var t=e.id,a=e.value,n=e.field,i=e.type,r={};return r.id=t,r.value=a,n&&(r.field=n),i&&(r.type=1),r},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(f(l.a.mark(function a(){var n,i;return l.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return n=[e.row.id],t.loading=!0,a.next=4,order.delOrder(n);case 4:i=a.sent,t.loading=!1,0===i.error_code&&(t.getRefunds(t.currentPage-1),t.$message({type:"success",message:"".concat(i.msg)}));case 7:case"end":return a.stop()}},a)})))},closePage:function(e){this.redirectType="list",e&&this.getRefunds()}}},m=g,v=(a("54f7"),a("2877")),w=Object(v["a"])(m,n,i,!1,null,"5b2745a3",null);t["default"]=w.exports},"54f7":function(e,t,a){"use strict";a("d7a6")},"8eab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lin-search"},[a("el-select",{staticClass:"el-select",attrs:{size:"medium",filterable:"",placeholder:"请选择客户等级"},on:{change:e.selEvent},model:{value:e.curSel,callback:function(t){e.curSel=t},expression:"curSel"}},[e._l(e.selData,function(t,n){return[a("el-option",{key:t,attrs:{value:n,label:t}},[a("span",[e._v(e._s(t))])])]})],2),a("el-input",{staticClass:"input-with-select",attrs:{size:"medium",placeholder:e.placeholder,clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBtn},slot:"append"})],1)],1)},i=[],r=a("306b"),l={props:{placeholder:{type:String,default:"请输入内容"},selData:{type:Array,default:["客户名","责任人"]}},data:function(){return{keyword:"",curSel:0}},created:function(){var e=this;this.$watch("keyword",r["default"].debounce(function(t){e.$emit("query",t)},1e3))},methods:{clear:function(){this.keyword="",this.$emit("close")},selEvent:function(){var e=this.curSel;this.$emit("sel",e)},searchBtn:function(){var e=this.keyword;this.$emit("btn",e)}}},s=l,o=(a("0acb"),a("2877")),c=Object(o["a"])(s,n,i,!1,null,"b980f458",null);t["default"]=c.exports},c9ad:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",size:"medium","popper-class":"date-box","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},i=[],r={data:function(){return{value:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},watch:{value:function(e){this.$emit("dateChange",e)}},methods:{clear:function(){this.value=""}}},l=r,s=a("2877"),o=Object(s["a"])(l,n,i,!1,null,null,null);t["default"]=o.exports},d7a6:function(e,t,a){},e71c:function(e,t,a){"use strict";a("07a6")},f73d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feiy-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"el-table-wrap",attrs:{data:e.tableData,id:"out-table'"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.filterTableColumn,function(t){return[t.noRepeat?e._e():a("el-table-column",{key:t.label,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":!0,fixed:!!t.fixed&&t.fixed,width:t.width?t.width:""}}),"image"===t.type?a("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row[t.prop]?a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:n.row[t.prop],fit:"cover"}}):a("span",[e._v("暂无图片")])]}}],null,!0)}):e._e(),"tag"===t.type?a("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[e._t("default",null,{tag:a.row[t.prop],prop:t.prop})]}}],null,!0)}):e._e(),"edit"===t.type?a("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,width:t.width,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.editFlag?a("div",{staticClass:"table-edit"},[a("el-input",{attrs:{size:"mini"},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[item.prop]"}}),a("div",{staticClass:"cell-icon-edit"},[a("div",{staticClass:"cell-save",on:{click:function(a){return e.handleCellSave(n.row,n.$index,t.prop)}}},[a("i",{staticClass:"el-icon-check"})]),a("div",{staticClass:"cell-cancel",on:{click:function(a){return e.handleCellCancel(n.row,n.$index,t.prop)}}},[a("i",{staticClass:"el-icon-close"})])])],1):a("div",{staticClass:"table-edit table-edit-start"},[a("div",{staticClass:"content"},[e._v(e._s(n.row[t.prop]))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdit[n.row.id],expression:"showEdit[scope.row.id]"}],staticClass:"cell-icon",on:{click:function(a){return e.handleCellEdit(n.row,n.$index,t.prop)}}},[a("i",{staticClass:"el-icon-edit"})])])]}}],null,!0)}):e._e(),"radio"===t.type?a("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-switch",{attrs:{"active-color":"#3963bc"},on:{change:function(t){return e.handleRecommend(t,n.row)}},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[item.prop]"}})]}}],null,!0)}):e._e(),"rate"===t.type?a("el-table-column",{attrs:{label:t.label,prop:t.prop,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-rate",{attrs:{colors:t.color,disabled:t.disabled,max:t.max},on:{change:function(a){return e.rateChange(t.prop,n.row)}},model:{value:n.row[t.prop],callback:function(a){e.$set(n.row,t.prop,a)},expression:"scope.row[item.prop]"}}),t.reset?a("div",{staticClass:"reset-rate",staticStyle:{"font-size":"12px","margin-left":"10px",cursor:"pointer"},on:{click:function(a){return e.resetRate(t.prop,n.row)}}},[e._v("重置")]):e._e()]}}],null,!0)}):e._e()]}),e.operate.length>0?a("el-table-column",{attrs:{label:"操作",fixed:"right",width:e.operateStyle.width},scopedSlots:e._u([{key:"default",fn:function(t){return e.operate.icon?e._l(e.operate,function(n,i){return a("el-button",{key:i,attrs:{type:n.type,plain:"",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.buttonMethods(n.func,t.$index,t.row)}}},[e._v(e._s(n.name))])}):void 0}}],null,!0)}):e._e()],2),e.pagination?a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","page-size":e.pagination.pageSize?e.pagination.pageSize:10,total:e.pagination.pageTotal?e.pagination.pageTotal:null},on:{"current-change":e.currentChange}}):e._e()],1)},i=[],r={name:"feiy-table",props:{tableColumn:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},operate:{type:Array,default:function(){return[]}},operateStyle:{type:Object,default:function(){return{width:250}}},customColumn:{type:Array,default:function(){return[]}},pagination:{type:[Object,Boolean],default:!1},loading:{type:Boolean,default:!1}},data:function(){return{filterTableColumn:[],currentPage:1,currentData:[],selectedTableData:[],showEdit:{},cellIndex:-1,tempEditVal:{}}},created:function(){},watch:{customColumn:{handler:function(e){e.length>1&&(this.filterTableColumn=this.tableColumn.filter(function(t){return e.indexOf(t.label)>-1}))},deep:!0},tableData:{handler:function(){var e=this;this.initMouseEvent(),this.pagination&&this.pagination.pageSize?this.currentData=this.tableData.filter(function(t,a){return a<e.pagination.pageSize}):this.currentData=this.tableData},deep:!0,immediate:!0},tableColumn:{handler:function(e){var t=this;this.customColumn.length>1?this.filterTableColumn=this.tableColumn.filter(function(e){return t.customColumn.indexOf(e.label)>-1}):this.filterTableColumn=this.tableColumn},deep:!0,immediate:!0}},methods:{buttonMethods:function(e,t,a){var n=this,i=this.$options.methods;console.log(i),i[e](n,t,a)},handleEdit:function(e,t,a){e.$emit("handleEdit",{index:t,row:a})},handleDetail:function(e,t,a){e.$emit("handleDetail",{index:t,row:a})},handleStorage:function(e,t,a){e.$emit("handleStorage",{index:t,row:a})},resetRate:function(e,t){t[e]=0,this.rateChange(e,t)},rateChange:function(e,t){var a=t[e],n=t["id"];this.$emit("handleRate",{val:a,id:n})},handleDelete:function(e,t,a){e.$emit("handleDelete",{index:t,row:a})},handleSonCate:function(e,t,a){e.$emit("handleSonCate",{index:t,row:a})},handleCellEdit:function(e,t,a){e.editFlag=!0,this.cellIndex=t,this.tempEditVal[a]=e[a]},handleCellCancel:function(e,t,a){e.editFlag=!1,e[a]=this.tempEditVal[a]},handleCellSave:function(e,t,a){e.editFlag=!1,this.tempEditVal[a]=e[a],this.$emit("handleCellSave",{row:e,prop:a})},handleRecommend:function(e,t){this.$emit("handleRecommend",{val:e,row:t})},cellMouseEnter:function(e){this.showEdit[e.id]||this.$set(this.showEdit,e.id,!0)},cellMouseLeave:function(e){this.showEdit[e.id]&&this.$set(this.showEdit,e.id,!1)},initMouseEvent:function(){for(var e in this.showEdit)this.showEdit[e]&&this.$set(this.showEdit,e,!1)},currentChange:function(e){var t=this,a=[];this.oldVal=[],this.currentPage=e,this.selectedTableData=JSON.parse(sessionStorage.getItem("selectedTableData")),this.currentData=this.tableData.filter(function(e,a){return a>=(t.currentPage-1)*t.pagination.pageSize&&a<t.currentPage*t.pagination.pageSize}),this.$emit("currentChange",e),this.selectedTableData.forEach(function(e){for(var n=0;n<t.currentData.length;n++)t.currentData[n].key===e.key&&(t.oldVal.push(t.currentData[n]),a.push(t.currentData[n]))}),this.$nextTick(function(){t.toggleSelection instanceof Function&&t.toggleSelection(a)}),this.currentIndex=(this.currentPage-1)*this.pagination.pageSize+1}}},l=r,s=(a("e71c"),a("2877")),o=Object(s["a"])(l,n,i,!1,null,"35ec54b2",null);t["default"]=o.exports}}]);